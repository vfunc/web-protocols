# HPACK 的编码格式

## HPACK 中 HEADER 的编码格式

### HEADER 帧的格式

### CONTINUATION 持续帧(type=0x9)

* 跟在 HEADER 帧或者 PUSH_PROMISE 帧之后，补充完整的 HTTP 头部

### 同一地址空间下的静态表与动态表

* 静态表：61 项
* 动态表：先入先出的淘汰策略
   - 动态表大小由 SETTINGS_HEADER_TABLE_SIZE 设置帧定义
   - 允许重复项
   - 初始为空

### 字面编码

* 组成
   - header name 和 value 以索引方式编码
   - header name 以索引方式编码，而 header value 以字面形式编码
   - header name 和 value 都以字面形式编码
* 可控制是否进入动态表
   - 进入动态表，供后续传输优化使用
   - 不进入动态表
   - 不进入动态表，并约定该头部永远不进入动态表

### HEADER 二进制编码格式

* 名称与值都在索引表中（包括静态表与动态表）
* 名称在索引表中，值需要编码传递，同时新增至动态表中
* 名称、值都需要编码传递，同时新增至动态表中
* 名称在索引表中，值需要编码传递，且不更新至动态表中
* 名称、值都需要编码传递，且不更新至动态表中
* 名称在索引表中，值需要编码传递，且永远不更新至动态表中
* 名称、值都需要编码传递，且永远不更新至动态表中

### 动态表大小的两种控制方式

* 在 HEADER 帧中直接修改
* 在 SETTING 帧中修改

> 此文章为 2 月 Day14 学习笔记，内容来源于极客时间[《Web 协议详解与抓包实战》](http://gk.link/a/11UWp)，强烈推荐该课程！
