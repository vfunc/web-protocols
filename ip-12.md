# 从 wireshark 报文统计中找规律

### 报文统计

* 搭配“显示过滤器”使用
* 统计方式
  - 报文总体分布：捕获文件属性与数据包长度分布
  - 端点统计与会话统计
  - 协议分级统计
  - HTTP/HTTP2 等应用层协议统计
  - TCP 协议连接统计
  - IO 流统计与数据流统计

### 报文总体分布

* 捕获文件属性
  - when：何时抓包
  - where：哪个 IP 接口在抓包
  - how：捕获过滤器是什么？
  - how much：多少报文？多少字节？多快速率？
* 报文长度分布：信息传输效率
  - 各种长度报文的分布

### 协议分级统计（配合显示过滤器）

* 分组数量/字节数百分比（同层）
* 绝对分组数量/字节数
* 速率（比特/秒）
* 协议消息统计
  - 结束“分组”
  - 结束字节
  - 结束速率

### 端点统计/会话统计

* OSI 不同层次统计
  - 数据链路层（解析名称：MAC/IP/PORT）
    - 通讯双方/单端点、分组数、字节数、报文方向、速率、持续时间
  - 网络层
  - 传输层
    - UDP/TCP，端口统计
* 快速应用过滤器及着色规则

### HTTP/HTTP2 统计

* HTTP
  - 分组统计：请求方法与响应码统计
  - 请求：基于 Host 和 URI 统计
  - 负载均衡：基于 IP 与 Host 统计
  - 请求序列：对请求同一 Domain 下的 URI 统计
* HTTP2
  - 帧类型统计

### TCP 连接信息统计

* 基于 TCP 连接特性统计，可切换方向
  - RTT 时间
  - 吞吐量
  - 窗口大小
  - 序列号

### IO 图表与数据流统计

* IO 图表
  - 绘制出不同颜色、各类型（折线、直方、点）图
  - 以时间作为 X 轴（可选择时间间隔）
  - 可设置过滤器下的报文信息为Y轴
    - 报文数量、字节数、统计函数
* 数据流
  - 可选择基于显示过滤器，显示各端之间的数据流量

### 专家系统

* Error：错误信息，包括 Wireshark 解析失败信息
* Warning：异常警告信息
  - RST 复位关闭、TCP 窗口关闭、TCP 乱序报文等
* Note：正常通信中的异常通信报文
  - TCP 重复 ACK、TCP 重传报文、Keepalive、TLS 复用密钥、零窗口探查等
* Chat：通信的基本信息

> 此文章为 4 月 Day16 学习笔记，内容来源于极客时间[《Web 协议详解与抓包实战》](http://gk.link/a/11UWp)，强烈推荐该课程！
