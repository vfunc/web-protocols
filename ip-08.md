# ICMP 协议

### ICMP：Internet Control Message Protocol

* RFC792
* IP 助手
  - 告知错误
  - 传递信息

### ICMP协议格式

* 承载在 IP 之上
* 组成字段
  - 类型
  - 子类型
  - 校验和

### ICMPv4 报文类型

* 错误报文
  - 3：目的地不可达
  - 4：发生拥塞，要求发送方降低速率
  - 5：告诉主机更好的网络路径
  - 11：路径超出 TTL 限制
  - 12：其他问题
* 信息报文
  - 0：连通性测试中的响应
  - 8：连通性测试中的请求
  - 9：路由器通告其能力
  - 10：路由器通知请求
  - 13：时间戳请求
  - 14：时间戳应答
  - 17：掩码请求
  - 18：掩码应答
  - 30：Traceroute

### 目的地不可达报文：Type=3

* 常用子类型 Code
  - 0：网络不可达
  - 1：主机不可达
  - 2：协议不可达
  - 3：端口不可达
  - 4：要分片但 DF 为1
  - 10：不允许向特定主机通信
  - 13：管理受禁

### Echo 与 Echo Reply 报文

* ping 联通性测试

### TTL 超限：Type=11

* traceroute/tracert

> 此文章为 4 月 Day12 学习笔记，内容来源于极客时间[《Web 协议详解与抓包实战》](http://gk.link/a/11UWp)，强烈推荐该课程！
